@using Microsoft.AspNet.Identity
@{
    MultivendorEcommerceStore.DB.ViewModel.UserProfileViewModel layoutModel = ViewBag.LayoutModel;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Mosaddek">
    <meta name="keyword" content="FlatLab, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <link rel="shortcut icon" type="image/x-icon" href="~/Content/Images/Icons/Favicon.png" />

    <title>AdminPanel - FineCollection</title>

    <!-- Bootstrap core CSS -->
    <link href="~/Content/Adminplugins/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/Adminplugins/css/bootstrap-reset.css" rel="stylesheet" />

    <!--external css-->
    <link href="~/Content/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="~/Content/Adminplugins/css/owl.carousel.css" rel="stylesheet" />

    <!--right slidebar-->
    <link href="~/Content/Adminplugins/css/slidebars.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="~/Content/Adminplugins/css/style.css" rel="stylesheet" />
    <link href="~/Content/Adminplugins/css/style-responsive.css" rel="stylesheet" />
    <title>@ViewBag.Title</title>
</head>

<body>

    <section id="container">
        <!--header start-->
        <header class="header white-bg">
            <div class="sidebar-toggle-box">
                <i class="fa fa-bars"></i>
            </div>

            <!--logo start-->
            @if (User.IsInRole("Admin"))
            {
                <a href="@Url.Action("Index", "Admin")" class="logo">Fine<span>Collection</span></a>
            }

            else if (User.IsInRole("Supplier"))
            {
                <a href="@Url.Action("Index", "Supplier")" class="logo">Fine<span>Collection</span></a>
            }
            <!--logo end-->


            @if (User.IsInRole("Admin"))
            {
                <div class="nav notify-row" id="top_menu">
                    @Html.Partial("_Notification")
                </div>
            }


            <div class="top-nav ">
                <!--search & user info start-->
                <ul class="nav pull-right top-menu">
                    @*<li>
                        <input type="text" class="form-control search" placeholder="Search">
                    </li>*@
                    <!-- user login dropdown start-->
                    @Html.Partial("_UserInfoDropdown")
                    <!-- user login dropdown end -->
                </ul>
                <!--search & user info end-->
            </div>
        </header>
        <!--header end-->
        <!--sidebar start-->
        <aside>
            <div id="sidebar" class="nav-collapse ">
                @Html.Partial("_AdminSideMenus")
            </div>
        </aside>
        <!--sidebar end-->
        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">
                @RenderBody()
            </section>
        </section>
        <!--main content end-->
    </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="~/Content/Adminplugins/js/jquery.js"></script>
    <script src="~/Content/Adminplugins/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="~/Content/Adminplugins/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="~/Content/Adminplugins/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="~/Content/Adminplugins/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="~/Content/Adminplugins/js/jquery.scrollTo.min.js"></script>
    <script src="~/Content/Adminplugins/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script type="text/javascript" src="~/Content/assets/data-tables/jquery.dataTables.js"></script>
    <script type="text/javascript" src="~/Content/assets/data-tables/DT_bootstrap.js"></script>
    <script src="~/Content/Adminplugins/js/respond.min.js"></script>

    <script src="~/Content/assets/fancybox/source/jquery.fancybox.js"></script>
    <script src="~/Content/Adminplugins/js/modernizr.custom.js"></script>
    <script src="~/Content/Adminplugins/js/toucheffects.js"></script>

    <!--right slidebar-->
    <script src="~/Content/Adminplugins/js/slidebars.min.js"></script>

    <!--common script for all pages-->
    <script src="~/Content/Adminplugins/js/common-scripts.js"></script>

    <!--script for this editable page only-->
    <script src="~/Content/Adminplugins/js/editable-table.js"></script>

    <!-- scripts for index page -->
    <script src="~/Content/Adminplugins/js/jquery.sparkline.js" type="text/javascript"></script>
    <script src="~/Content/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js"></script>
    <script src="~/Content/Adminplugins/js/owl.carousel.js"></script>
    <script src="~/Content/Adminplugins/js/jquery.customSelect.min.js"></script>


    <!--script for this page-->
    <script src="~/Content/Adminplugins/js/sparkline-chart.js"></script>
    <script src="~/Content/Adminplugins/js/easy-pie-chart.js"></script>
    <script src="~/Content/Adminplugins/js/count.js"></script>

    <!--script for print record-->
    <script type="text/javascript">
        function Print(content) {
            var printContents = document.getElementById(content).innerHTML;
            w = window.open();
            w.document.write(printContents);
            w.print();
            w.close();
        }
    </script>


    <!--  END JAVASCRIPTS -->
    <script>
        jQuery(document).ready(function () {
            EditableTable.init();
        });

        //owl carousel

        $(document).ready(function () {
            $("#owl-demo").owlCarousel({
                navigation: true,
                slideSpeed: 300,
                paginationSpeed: 400,
                singleItem: true,
                autoPlay: true

            });
        });

        //custom select box

        $(function () {
            $('select.styled').customSelect();
        });

        $(window).on("resize", function () {
            var owl = $("#owl-demo").data("owlCarousel");
            owl.reinit();
        });

    </script>
    @RenderSection("scripts", required: false)

    <script type="text/javascript">
        $(document).ready(function () {
            setInterval(ajaxRefresh, 2000);
        });
        function ajaxRefresh() {
            $.ajax({
                url: "/Notification/GetNotifications",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    debugger;
                    //var count = data.OrderNotificationList.length + data.ShopNotificationList.length + data.SupplierNotificationList.length + data.ProductNotificationList.length + data.CustomerNotificationList.length;
                    var count = data.ProductNotificationList.length + data.CustomerNotificationList.length;
                    $("#NotificationCount").empty();
                    $("#NotificationCount").append(count);
                    $(".ToRemove").remove();
                    //for (var i = 0; i < data.OrderNotificationList.length; i++) {
                    //    $("#OrderNotifications").append("<li class=\"ToRemove\" value=\"" + data.OrderNotificationList[i].OrderNotificationID + "\"><a class=\"list-group-item list-group-item-action\" href= \"" + data.OrderNotificationList[i].OrderNotificationURL + "\">" + data.OrderNotificationList[i].OrderNotificationDescription + "</a></li>");
                    //}
                    //for (var i = 0; i < data.SupplierNotificationList.length; i++) {
                    //    $("#SupplierNotifications").append("<li class=\"ToRemove\" value=\"" + data.SupplierNotificationList[i].SupplierNotificationID + "\"><a class=\"list-group-item list-group-item-action\" href= \"" + data.SupplierNotificationList[i].SupplierNotificationURL + "\">" + data.SupplierNotificationList[i].SupplierNotificationDescription + "</a></li>");
                    //}
                    for (var i = 0; i < data.ProductNotificationList.length; i++) {
                        $("#ProductNotifications").append("<li class=\"ToRemove\" value=\"" + data.ProductNotificationList[i].ProductNotificationID + "\"><a class=\"list-group-item list-group-item-action\" href= \"" + data.ProductNotificationList[i].ProductNotificationURL + "\"><img src='" + data.ProductNotificationList[i].ProductImage.replace(/~/g, '') + "' alt=\"\" height=\"35\" width=\"35\" />" + data.ProductNotificationList[i].ProductNotificationDescription + "</a></li>");
                    }
                    //for (var i = 0; i < data.ShopNotificationList.length; i++) {
                    //    $("#ShopNotifications").append("<li class=\"ToRemove\" value=\"" + data.ShopNotificationList[i].ShopNotificationID + "\"><a class=\"list-group-item list-group-item-action\" href= \"" + data.ShopNotificationList[i].ShopNotificationURL + "\"><img src='" + data.ShopNotificationList[i].ShopLogo.replace(/~/g, '') + "' alt=\"\" height=\"35\" width=\"35\" />" + data.ShopNotificationList[i].ShopNotificationDescription + "</a></li>");
                    //}
                    for (var i = 0; i < data.CustomerNotificationList.length; i++) {
                        $("#CustomerNotifications").append("<li class=\"ToRemove\" value=\"" + data.CustomerNotificationList[i].CustomerNotificationID + "\"><a class=\"list-group-item list-group-item-action\" href= \"" + data.CustomerNotificationList[i].CustomerNotificationURL + "\"><img src='" + data.CustomerNotificationList[i].CustomerImage.replace(/~/g, '') + "' alt=\"\" height=\"35\" width=\"35\" />" + data.CustomerNotificationList[i].CustomerNotificationDescription + "</a></li>");
                    }
                }
            })
        };
    </script>

</body>
</html>
